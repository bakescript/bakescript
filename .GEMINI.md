# GovernanÃ§a de CÃ³digo - Regras ObrigatÃ³rias

## Contexto

Este projeto segue um conjunto rigoroso de regras de qualidade de cÃ³digo documentadas na pasta `.rules/`. Cada regra Ã© categorizada, possui critÃ©rios objetivos mensurÃ¡veis e severidade definida. VocÃª DEVE seguir todas as regras ao escrever, revisar ou sugerir cÃ³digo.

## LocalizaÃ§Ã£o das Regras

- **RepositÃ³rio**: `.rules/`
- **Formato**: `[NNN]_[nome-da-regra].md`
- **Estrutura**: Cada regra contÃ©m ID, severidade, categoria, critÃ©rios objetivos, exceÃ§Ãµes e detecÃ§Ã£o

## InstruÃ§Ãµes de Comportamento

### 1. Leitura AutomÃ¡tica de Regras

Quando vocÃª receber solicitaÃ§Ãµes de cÃ³digo, SEMPRE:

1. **Liste** todos os arquivos em `.rules/`
2. **Leia** cada arquivo de regra para entender:
   - ID e categoria (Criacional/Comportamental/Estrutural)
   - Severidade (ğŸ”´ CrÃ­tica / ğŸŸ  Alta / ğŸŸ¡ MÃ©dia / ğŸŸ¢ Baixa)
   - CritÃ©rios objetivos mensurÃ¡veis
   - ExceÃ§Ãµes permitidas
3. **Aplique** as regras ao cÃ³digo que vocÃª criar ou revisar
4. **Priorize** por severidade: ğŸ”´ â†’ ğŸŸ  â†’ ğŸŸ¡ â†’ ğŸŸ¢

### 2. CriaÃ§Ã£o de CÃ³digo

Ao escrever cÃ³digo, vocÃª deve:

âœ… **Seguir TODAS as regras por padrÃ£o**
- Verifique cada critÃ©rio objetivo das regras aplicÃ¡veis
- Respeite limites numÃ©ricos (linhas, parÃ¢metros, complexidade)
- Aplique padrÃµes estruturais definidos

âœ… **Documentar exceÃ§Ãµes justificadas**
- Se violar uma regra, cite o ID da regra
- Explique qual exceÃ§Ã£o permitida vocÃª estÃ¡ usando
- Adicione comentÃ¡rio no cÃ³digo: `// REGRA [ID]: [justificativa]`

âœ… **Validar antes de retornar**
- FaÃ§a uma checklist mental de todas as regras ğŸ”´ CrÃ­ticas
- Verifique regras ğŸŸ  Altas relacionadas ao cÃ³digo
- Mencione quais regras vocÃª seguiu

âŒ **NUNCA faÃ§a**:
- Ignorar regras silenciosamente
- Violar regras ğŸ”´ CrÃ­ticas sem justificativa explÃ­cita
- Criar cÃ³digo que nÃ£o passa nos critÃ©rios objetivos
- Sugerir soluÃ§Ãµes que claramente violam mÃºltiplas regras

### 3. RevisÃ£o de CÃ³digo

Quando revisar cÃ³digo existente ou fornecido pelo usuÃ¡rio:

1. **AnÃ¡lise sistemÃ¡tica**:
   ```
   Para cada arquivo/funÃ§Ã£o:
   â”œâ”€ Identificar regras aplicÃ¡veis (por categoria)
   â”œâ”€ Verificar critÃ©rios objetivos
   â”œâ”€ Detectar violaÃ§Ãµes
   â””â”€ Classificar por severidade
   ```

2. **Formato de reporte**:
   ```markdown
   ## ğŸ” AnÃ¡lise de Conformidade

   ### âœ… Regras Seguidas
   - [ID-REGRA]: [Nome da regra]

   ### âš ï¸ ViolaÃ§Ãµes Detectadas

   #### ğŸ”´ CrÃ­ticas
   - **[ID-REGRA]**: [Nome]
     - LocalizaÃ§Ã£o: [arquivo:linha]
     - CritÃ©rio violado: [qual critÃ©rio objetivo]
     - SugestÃ£o: [como corrigir]

   #### ğŸŸ  Altas
   [mesmo formato]

   #### ğŸŸ¡ MÃ©dias
   [mesmo formato]

   ### ğŸ’¡ RecomendaÃ§Ãµes
   [Melhorias opcionais baseadas em regras ğŸŸ¢ Baixas]
   ```

3. **PriorizaÃ§Ã£o de correÃ§Ãµes**:
   - Bloquear merge em violaÃ§Ãµes ğŸ”´ CrÃ­ticas
   - Requerer correÃ§Ã£o de ğŸŸ  Altas
   - Sugerir correÃ§Ã£o de ğŸŸ¡ MÃ©dias
   - Mencionar ğŸŸ¢ Baixas como melhorias futuras

### 4. ExplicaÃ§Ãµes e Ensino

Quando explicar conceitos de cÃ³digo:

- **Cite regras relevantes**: "Segundo a regra [ID] ([Nome]), devemos..."
- **Use critÃ©rios objetivos**: Cite nÃºmeros/limites das regras
- **Reforce princÃ­pios**: Conecte regras aos princÃ­pios SOLID/Clean Code
- **Mostre exemplos**: âŒ ViolaÃ§Ã£o vs âœ… Conformidade

### 5. RefatoraÃ§Ã£o

Ao sugerir refatoraÃ§Ãµes:

1. Identifique quais regras o cÃ³digo atual viola
2. Proponha soluÃ§Ã£o que resolva TODAS as violaÃ§Ãµes
3. Liste regras que a refatoraÃ§Ã£o atende
4. Verifique se nÃ£o introduz novas violaÃ§Ãµes

**Template de refatoraÃ§Ã£o**:
```markdown
## ğŸ”§ RefatoraÃ§Ã£o Proposta

### Problema
CÃ³digo atual viola:
- [ID-1]: [critÃ©rio especÃ­fico]
- [ID-2]: [critÃ©rio especÃ­fico]

### SoluÃ§Ã£o
[cÃ³digo refatorado]

### Conformidade
âœ… Agora atende:
- [ID-1]: [como resolve]
- [ID-2]: [como resolve]
- [ID-3]: [regra adicional que passou a seguir]

### Trade-offs
[Se houver, explique com base em exceÃ§Ãµes permitidas]
```

## Hierarquia de Prioridade

Em caso de conflito ou dÃºvida, siga esta ordem:

1. **Regras ğŸ”´ CrÃ­ticas** - InviolÃ¡veis (exceto exceÃ§Ãµes documentadas)
2. **Regras ğŸŸ  Altas** - Fortemente recomendadas
3. **Regras ğŸŸ¡ MÃ©dias** - Recomendadas
4. **Regras ğŸŸ¢ Baixas** - Opcionais (preferÃªncia de equipe)
5. **SolicitaÃ§Ã£o do usuÃ¡rio** - Se usuÃ¡rio pedir explicitamente para violar regra, avise sobre severidade e peÃ§a confirmaÃ§Ã£o

## Fluxo de Trabalho PadrÃ£o

```
ğŸ“¥ Receber solicitaÃ§Ã£o
    â†“
ğŸ“‚ Ler .rules/ (listar + ler todos os .md)
    â†“
ğŸ§  Identificar regras aplicÃ¡veis ao contexto
    â†“
âœï¸ Escrever cÃ³digo conforme
    â†“
âœ… Validar contra critÃ©rios objetivos
    â†“
ğŸ“‹ Documentar conformidade na resposta
    â†“
ğŸ“¤ Entregar com checklist de regras seguidas
```

## Exemplo de Resposta Ideal

````markdown
Aqui estÃ¡ a implementaÃ§Ã£o solicitada:

```typescript
// [cÃ³digo]
```

### ğŸ“‹ Conformidade com Regras

**Regras seguidas**:
- âœ… ESTRUTURAL-001 (Limite de ParÃ¢metros): FunÃ§Ã£o tem 2 parÃ¢metros (limite: 3)
- âœ… COMPORTAMENTAL-005 (Single Responsibility): Classe tem uma Ãºnica responsabilidade
- âœ… ESTRUTURAL-012 (Complexidade CiclomÃ¡tica): CC = 4 (limite: 10)

**ValidaÃ§Ã£o**:
- Linhas por mÃ©todo: 8-12 (dentro do limite de 15)
- DependÃªncias: 2 (aceitÃ¡vel)
- Cobertura de testes: NecessÃ¡rio adicionar

**PrÃ³ximos passos**: Adicionar testes unitÃ¡rios conforme COMPORTAMENTAL-008.
````

## Metadados de Regras

Quando mencionar regras, SEMPRE inclua:
- **ID completo**: Ex: ESTRUTURAL-042
- **Nome**: Ex: "Limite de ParÃ¢metros em Construtores"
- **CritÃ©rio especÃ­fico**: Ex: "MÃ¡ximo 3 parÃ¢metros"

Nunca use referÃªncias vagas como "a regra de parÃ¢metros" - sempre use o ID.

## AtualizaÃ§Ã£o de Regras

Se vocÃª detectar que:
- Uma regra estÃ¡ desatualizada
- Falta uma regra importante
- HÃ¡ conflito entre regras

Informe ao usuÃ¡rio e sugira usar o comando `/rule` para atualizar o repositÃ³rio.

## InicializaÃ§Ã£o

Ao iniciar uma conversa neste projeto:

1. Leia automaticamente `.rules/`
2. Construa Ã­ndice mental de regras por categoria
3. Confirme: "âœ… Regras carregadas: [N] regras ([X] CrÃ­ticas, [Y] Altas, [Z] MÃ©dias, [W] Baixas)"
4. Proceda normalmente aplicando as regras

---

**VersÃ£o**: 1.0
**Ãšltima atualizaÃ§Ã£o**: 2025-10-04

Este documento instrui vocÃª a seguir rigorosamente o sistema de governanÃ§a de cÃ³digo do projeto. ViolaÃ§Ãµes nÃ£o justificadas devem ser tratadas como bugs.
